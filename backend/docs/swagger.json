{
  "swagger": "2.0",
  "info": {
    "title": "SOCIAL SH API",
    "version": "1.0",
    "description": "API для интернет-магазина SOCIAL SH",
    "contact": {
      "name": "API Support",
      "email": "info@socialsh.ru"
    }
  },
  "host": "localhost:3001",
  "basePath": "/api",
  "schemes": ["http"],
  "securityDefinitions": {
    "Bearer": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "Введите 'Bearer {token}' для авторизации"
    }
  },
  "paths": {
    "/products": {
      "get": {
        "tags": ["Магазин"],
        "summary": "Список товаров",
        "parameters": [
          {
            "name": "new",
            "in": "query",
            "type": "boolean",
            "description": "Только новые товары"
          },
          {
            "name": "sale",
            "in": "query",
            "type": "boolean",
            "description": "Только товары со скидкой"
          },
          {
            "name": "page",
            "in": "query",
            "type": "integer",
            "default": 1
          },
          {
            "name": "limit",
            "in": "query",
            "type": "integer",
            "default": 20
          }
        ],
        "responses": {
          "200": {
            "description": "Список товаров",
            "schema": {
              "type": "object",
              "properties": {
                "items": {
                  "type": "array",
                  "items": {"$ref": "#/definitions/Product"}
                }
              }
            }
          }
        }
      }
    },
    "/products/{slug}": {
      "get": {
        "tags": ["Магазин"],
        "summary": "Один товар по slug",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Товар",
            "schema": {
              "$ref": "#/definitions/Product"
            }
          },
          "404": {
            "description": "Товар не найден"
          }
        }
      }
    },
    "/gallery": {
      "get": {
        "tags": ["Галерея"],
        "summary": "Элементы галереи",
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "type": "string",
            "description": "Категория (intro, tattoo, tokyo)"
          }
        ],
        "responses": {
          "200": {
            "description": "Список элементов",
            "schema": {
              "type": "object",
              "properties": {
                "items": {
                  "type": "array",
                  "items": {"$ref": "#/definitions/GalleryItem"}
                }
              }
            }
          }
        }
      }
    },
    "/pages/{slug}": {
      "get": {
        "tags": ["Страницы"],
        "summary": "Статическая страница",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "type": "string",
            "enum": ["payment", "delivery", "returns", "contacts"]
          }
        ],
        "responses": {
          "200": {
            "description": "Страница",
            "schema": {
              "$ref": "#/definitions/Page"
            }
          }
        }
      }
    },
    "/auth/sign-up": {
      "post": {
        "tags": ["Авторизация"],
        "summary": "Регистрация",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/SignUpRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Токены",
            "schema": {
              "$ref": "#/definitions/TokenResponse"
            }
          },
          "409": {
            "description": "Пользователь уже существует"
          }
        }
      }
    },
    "/auth/sign-in": {
      "post": {
        "tags": ["Авторизация"],
        "summary": "Вход",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/SignInRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Токены",
            "schema": {
              "$ref": "#/definitions/TokenResponse"
            }
          },
          "401": {
            "description": "Неверный email или пароль"
          }
        }
      }
    },
    "/auth/is-admin": {
      "get": {
        "tags": ["Авторизация"],
        "summary": "Проверка админки",
        "security": [{"Bearer": []}],
        "responses": {
          "200": {
            "description": "Результат",
            "schema": {
              "type": "object",
              "properties": {
                "isAdmin": {"type": "boolean"}
              }
            }
          }
        }
      }
    },
    "/account/me": {
      "get": {
        "tags": ["Личный кабинет"],
        "summary": "Профиль пользователя",
        "security": [{"Bearer": []}],
        "responses": {
          "200": {
            "description": "Профиль",
            "schema": {
              "type": "object",
              "properties": {
                "user": {"$ref": "#/definitions/User"}
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Личный кабинет"],
        "summary": "Обновить профиль",
        "security": [{"Bearer": []}],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdateProfileRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Обновлённый профиль",
            "schema": {
              "type": "object",
              "properties": {
                "user": {"$ref": "#/definitions/User"}
              }
            }
          }
        }
      }
    },
    "/account/orders": {
      "get": {
        "tags": ["Личный кабинет"],
        "summary": "Список заказов",
        "security": [{"Bearer": []}],
        "responses": {
          "200": {
            "description": "Список заказов",
            "schema": {
              "type": "object",
              "properties": {
                "items": {
                  "type": "array",
                  "items": {"$ref": "#/definitions/Order"}
                }
              }
            }
          }
        }
      }
    },
    "/admin/products": {
      "get": {
        "tags": ["Админка"],
        "summary": "Список всех товаров",
        "security": [{"Bearer": []}],
        "responses": {
          "200": {
            "description": "Список товаров",
            "schema": {
              "type": "object",
              "properties": {
                "items": {
                  "type": "array",
                  "items": {"$ref": "#/definitions/Product"}
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Админка"],
        "summary": "Создать товар",
        "security": [{"Bearer": []}],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Product"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Созданный товар",
            "schema": {
              "$ref": "#/definitions/Product"
            }
          }
        }
      }
    },
    "/admin/products/{id}": {
      "get": {
        "tags": ["Админка"],
        "summary": "Один товар по ID",
        "security": [{"Bearer": []}],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Товар",
            "schema": {
              "$ref": "#/definitions/Product"
            }
          }
        }
      },
      "patch": {
        "tags": ["Админка"],
        "summary": "Обновить товар",
        "security": [{"Bearer": []}],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Product"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Обновлённый товар",
            "schema": {
              "$ref": "#/definitions/Product"
            }
          }
        }
      },
      "delete": {
        "tags": ["Админка"],
        "summary": "Удалить товар",
        "security": [{"Bearer": []}],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Успешно удалено"
          }
        }
      }
    },
    "/admin/gallery": {
      "get": {
        "tags": ["Админка"],
        "summary": "Список элементов галереи",
        "security": [{"Bearer": []}],
        "responses": {
          "200": {
            "description": "Список элементов",
            "schema": {
              "type": "object",
              "properties": {
                "items": {
                  "type": "array",
                  "items": {"$ref": "#/definitions/GalleryItem"}
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Админка"],
        "summary": "Создать элемент галереи",
        "security": [{"Bearer": []}],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/GalleryItem"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Созданный элемент",
            "schema": {
              "$ref": "#/definitions/GalleryItem"
            }
          }
        }
      }
    },
    "/admin/gallery/{id}": {
      "patch": {
        "tags": ["Админка"],
        "summary": "Обновить элемент галереи",
        "security": [{"Bearer": []}],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/GalleryItem"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Обновлённый элемент",
            "schema": {
              "$ref": "#/definitions/GalleryItem"
            }
          }
        }
      },
      "delete": {
        "tags": ["Админка"],
        "summary": "Удалить элемент галереи",
        "security": [{"Bearer": []}],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Успешно удалено"
          }
        }
      }
    },
    "/admin/pages": {
      "get": {
        "tags": ["Админка"],
        "summary": "Список страниц",
        "security": [{"Bearer": []}],
        "responses": {
          "200": {
            "description": "Список страниц",
            "schema": {
              "type": "object",
              "properties": {
                "items": {
                  "type": "array",
                  "items": {"$ref": "#/definitions/Page"}
                }
              }
            }
          }
        }
      }
    },
    "/admin/pages/{slug}": {
      "patch": {
        "tags": ["Админка"],
        "summary": "Обновить страницу",
        "security": [{"Bearer": []}],
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Page"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Обновлённая страница",
            "schema": {
              "$ref": "#/definitions/Page"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "Product": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "slug": {"type": "string"},
        "title": {"type": "string"},
        "description": {"type": "string"},
        "price": {"type": "integer", "description": "Цена в копейках"},
        "currency": {"type": "string", "default": "RUB"},
        "images": {
          "type": "array",
          "items": {"type": "string"}
        },
        "isNew": {"type": "boolean"},
        "isOnSale": {"type": "boolean"}
      }
    },
    "GalleryItem": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "category": {"type": "string"},
        "title": {"type": "string"},
        "image": {"type": "string"},
        "order": {"type": "integer"}
      }
    },
    "Page": {
      "type": "object",
      "properties": {
        "slug": {"type": "string"},
        "title": {"type": "string"},
        "content": {"type": "string"}
      }
    },
    "User": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "email": {"type": "string"},
        "name": {"type": "string"},
        "role": {"type": "string", "enum": ["user", "admin"]}
      }
    },
    "Order": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "userId": {"type": "string"},
        "status": {"type": "string"},
        "total": {"type": "integer"},
        "createdAt": {"type": "string", "format": "date-time"},
        "items": {
          "type": "array",
          "items": {"$ref": "#/definitions/OrderItem"}
        }
      }
    },
    "OrderItem": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "productId": {"type": "string"},
        "title": {"type": "string"},
        "price": {"type": "integer"},
        "quantity": {"type": "integer"}
      }
    },
    "SignUpRequest": {
      "type": "object",
      "required": ["email", "password", "name"],
      "properties": {
        "email": {"type": "string", "format": "email"},
        "password": {"type": "string", "minLength": 6},
        "name": {"type": "string"}
      }
    },
    "SignInRequest": {
      "type": "object",
      "required": ["email", "password"],
      "properties": {
        "email": {"type": "string", "format": "email"},
        "password": {"type": "string"}
      }
    },
    "TokenResponse": {
      "type": "object",
      "properties": {
        "access": {"type": "string"},
        "refresh": {"type": "string"}
      }
    },
    "UpdateProfileRequest": {
      "type": "object",
      "properties": {
        "name": {"type": "string"},
        "email": {"type": "string", "format": "email"}
      }
    }
  }
}
